<?xml version="1.0"?>
<odoo>

  <!-- View -->
  <record id="view_tree_articles" model="ir.ui.view">
    <field name="name">Sales preparation</field>
    <field name="model">product.template</field>
    <field name="priority" eval="100" />
    <field name="arch" type="xml">

    <tree>
      <field name="name"/>
      <field name="categ_id"/>
      <field name="main_seller_id"/>
      <field name="qty_available"/>
      <field name="estimated_stock_duration"/>
    </tree>
    </field>
  </record>

  <!-- Search filters -->
  <record id="sales_preparation_sales_view" model="ir.ui.view">
     <field name="model">product.template</field>
     <field name="arch" type="xml">
       <search>
         <field name="name"/>
         <filter name="filter_purchase_ok"
                 string="Available for purchase"
                 domain="[('purchase_ok', '=', True)]"/>
         <filter name="filter_sale_ok"
                 string="Available for sales"
                 domain="[('sale_ok','=', True)]"/>
         <separator/>
       </search>
     </field>
   </record>

    <!-- Menu item -->
  <record id="action_sales_preparation_articles" model="ir.actions.act_window">
      <field name="name">Sales Preparation</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">product.template</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" eval="view_tree_articles"/>
      <field name="context">{'search_default_filter_purchase_ok': 1}</field>
  </record>

  <menuitem id="menu_sales_preparation"
    parent="purchase.menu_procurement_management"
    action="action_sales_preparation_articles"/>

</odoo>
